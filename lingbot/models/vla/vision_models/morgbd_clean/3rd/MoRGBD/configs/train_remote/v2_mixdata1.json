{
  "data": {
      "aspect_ratio_range": [0.5, 2.0],
      "area_range": [250000, 1000000],
      "clamp_max_depth": 1000.0,
      "center_augmentation": 0.5,
      "fov_range_absolute": [1, 179],
      "fov_range_relative": [0.01, 1.0],
      "image_augmentation": ["jittering", "jpeg_loss", "blurring"],
      "mask_depth_in_on": true,
      "datasets": [ 
            {
                "name": "sim",
                "path": "/robby/share/datasets/vilab/RobbyStereoSim",
                "label_type": "C",
                "index": "train.txt",
                "weight": 5.0,
                "fov_range_relative": [0.5, 1.0],
                "image_augmentation": ["jittering", "jpeg_loss", "blurring", "dof"],
                "intrinsics": "/robby/share/datasets/vilab/RobbyStereoSim/intrinsics_sim_norm.txt",
                "depth_unit": 0.001,
                "noise_depth_in_on": false,
                "far": 20.0
            },
            {
              "name": "robby_real",
              "path": "/robby/share/3D/qinxiage/training_data/real_200w",
              "label_type": "C",
              "index": "train.txt",
              "weight": 5.0,
              "fov_range_relative": [0.5, 1.0],
              "image_augmentation": ["jittering", "jpeg_loss", "blurring", "dof"],
              "intrinsics": "/robby/share/3D/qinxiage/training_data/real_200w/intrinsics_real_norm.txt",
              "depth_unit": 0.001,
              "noise_depth_in_on": false,
              "far": 20.0
          },
          {
            "name": "scannetpp",
            "path": "/robby/share/3D/datasets/MonocularDataCollections/all/scannetppv2",
            "label_type": "B",
            "index": ".index.txt",
            "depth": "depth.png",
            "depth_in": "depth.png",
            "depth_unit": 5.0,
            "weight": 4.8,
            "fov_range_relative": [0.33, 1.0],
            "image_augmentation": ["jittering", "jpeg_loss", "blurring", "dof"],
            "far": 20.0
          },
          {
            "name": "taskonomy",
            "path": "/robby/share/3D/datasets/MonocularDataCollections/all/taskonomy",
            "label_type": "B",
            "index": ".index.txt",
            "depth": "depth.png",
            "depth_in": "depth.png",
            "depth_unit": 1.0,
            "weight": 2.0,
            "fov_range_relative": [0.75, 1.0],
            "image_augmentation": ["jittering", "jpeg_loss", "blurring", "dof"],
            "finite_depth_mask": "only_known",
            "far": 100.0
          },
          {
            "name": "TartanAir",
            "path": "/robby/share/3D/datasets/MonocularDataCollections/all/tartanair",
            "label_type": "B",
            "index": ".index.txt",
            "depth": "depth.png",
            "depth_in": "depth.png",
            "depth_unit": 1.0,
            "weight": 3.0,
            "fov_range_relative": [0.5, 1.0],
            "image_augmentation": ["jittering", "jpeg_loss", "blurring", "shot_noise", "dof"]
          },
          {
            "name": "hypersim",
            "path": "/robby/share/3D/datasets/MonocularDataCollections/all/hypersim",
            "label_type": "B",
            "index": ".index.txt",
            "depth": "depth.png",
            "depth_in": "depth.png",
            "weight": 2.0,
            "fov_range_relative": [0.5, 1.0],
            "image_augmentation": ["jittering", "jpeg_loss", "blurring", "shot_noise"],
            "depth_unit": 1.0,
            "far": 100.0
          },
          {
            "name": "arkitscenes",
            "path": "/robby/share/3D/datasets/MonocularDataCollections/all/arkitscenes",
            "label_type": "B",
            "index": ".index.txt",
            "depth": "depth.png",
            "depth_in": "depth.png",
            "weight": 3.0,
            "fov_range_relative": [0.5, 1.0],
            "image_augmentation": ["jittering", "jpeg_loss", "blurring", "shot_noise"],
            "depth_unit": 1.0,
            "far": 100.0
          },
          {
            "name": "adt",
            "path": "/robby/share/3D/datasets/MonocularDataCollections/all/adt",
            "label_type": "B",
            "index": ".index.txt",
            "depth": "depth.png",
            "depth_in": "depth.png",
            "weight": 2.0,
            "fov_range_relative": [0.5, 1.0],
            "image_augmentation": ["jittering", "jpeg_loss", "blurring", "shot_noise"],
            "depth_unit": 1.0,
            "far": 50.0
          }
      ]
  },
  "model_version": "v2",
  "model": {
      "encoder": {
          "backbone": "dinov2_vitl14", 
          "intermediate_layers": [5, 11, 17, 23], 
          "dim_out": 1024,
          "strict": false,
          "depth_emb_mode": "conv_1c",
          "img_depth_fuse_mode": "cat_token"
      }, 
      "neck": {
          "dim_in": [1026, 2, 2, 2, 2], 
          "dim_out": null, 
          "dim_res_blocks": [1024, 256, 128, 64, 32], 
          "num_res_blocks": [0, 2, 2, 2, 0], 
          "res_block_in_norm": "none", 
          "res_block_hidden_norm": "none", 
          "resamplers": ["conv_transpose", "conv_transpose", "conv_transpose", "bilinear"]
      }, 
      "depth_head": {
          "dim_in": [1024, 256, 128, 64, 32], 
          "dim_out": [null, null, null, null, 1], 
          "dim_res_blocks": [1024, 256, 128, 64, 32], 
          "num_res_blocks": [0, 1, 1, 1, 0], 
          "res_block_in_norm": "none", 
          "res_block_hidden_norm": "none", 
          "resamplers": ["conv_transpose", "conv_transpose", "conv_transpose", "bilinear"]
      }, 
      "normal_head": {
          "dim_in": [1024, 256, 128, 64, 32], 
          "dim_out": [null, null, null, null, 3], 
          "dim_res_blocks": [1024, 256, 128, 64, 32], 
          "num_res_blocks": [0, 1, 1, 1, 0], 
          "res_block_in_norm": "none", 
          "res_block_hidden_norm": "none", 
          "resamplers": ["conv_transpose", "conv_transpose", "conv_transpose", "bilinear"]
      }, 
      "mask_head": {
          "dim_in": [1024, 256, 128, 64, 32], 
          "dim_out": [null, null, null, null, 1], 
          "dim_res_blocks": [1024, 256, 128, 64, 32], 
          "num_res_blocks": [0, 1, 1, 1, 0], 
          "res_block_in_norm": "none", 
          "res_block_hidden_norm": "none", 
          "resamplers": ["conv_transpose", "conv_transpose", "conv_transpose", "bilinear"]
      }, 
      "remap_output": "exp", 
      "remap_depth_in": "linear",
      "num_tokens_range": [1200, 3600]
  },
  "optimizer": {
      "type": "AdamW",
      "params": [
          {"params": {"include": ["*"], "exclude": ["*backbone.*"]}, "lr": 1e-4},
          {"params": {"include": ["*backbone.*"]}, "lr": 1e-5}
      ]
  },
  "lr_scheduler": {
      "type": "SequentialLR",
      "params": {
          "schedulers": [
              {"type": "LambdaLR", "params": {"lr_lambda": ["1.0", "max(0.0, min(1.0, (epoch - 1000) / 1000))"]}},
              {"type": "StepLR", "params": {"step_size": 25000, "gamma": 0.5}}
          ],
          "milestones": [2000]
      }
  },
  "low_resolution_training_steps": 50000,
  "loss": {
      "invalid": {},
      "B": {
            "normal_map": {"function": "normal_map_loss", "weight": 0.1},
            "mask": {"function": "mask_l2_loss", "weight": 0.1},
            "depth": {"function": "depth_l1_loss", "weight": 1.0}
       },
       "C": {
            "normal_map": {"function": "normal_map_loss", "weight": 0.1},
            "mask": {"function": "mask_l2_loss", "weight": 0.1},
            "depth": {"function": "depth_l1_loss", "weight": 1.0}
       }
  }
}